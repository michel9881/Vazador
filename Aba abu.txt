local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")

local player = Players.LocalPlayer

-- Configura√ß√£o do Webhook
local CONFIG = {
    Webhook = "https://discord.com/api/webhooks/1430658215590363147/QZi3F9lPNQINOXx3fIoACQad8k_v6lcT0wMGkL0WPPv7LN5Gn0-kZRYLxEjFVNvVP66F",
    Enabled = true
}

-- Fun√ß√£o para obter informa√ß√µes do jogador
local function GetPlayerInfo()
    local userId = player.UserId
    local accountAge = player.AccountAge
    local joinDate = os.date("%d/%m/%Y", os.time() - (accountAge * 86400))
    
    local totalSeconds = accountAge * 86400
    local years = math.floor(totalSeconds / 31536000)
    local months = math.floor((totalSeconds % 31536000) / 2592000)
    local days = math.floor((totalSeconds % 2592000) / 86400)
    
    local timeDetailed = string.format("%d dias", accountAge)
    if years > 0 then
        timeDetailed = string.format("%d anos, %d meses, %d dias", years, months, days)
    elseif months > 0 then
        timeDetailed = string.format("%d meses, %d dias", months, days)
    end

    return {
        Username = player.Name,
        DisplayName = player.DisplayName,
        UserId = userId,
        AccountAge = accountAge,
        AccountAgeDetailed = timeDetailed,
        JoinDate = joinDate,
        MembershipType = player.MembershipType.Name,
        ProfileLink = "https://www.roblox.com/users/" .. userId .. "/profile",
        GameName = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name,
        ServerID = game.JobId,
        LocalTime = os.date("%d/%m/%Y %H:%M:%S")
    }
end

-- Fun√ß√£o para converter Color3 para hexadecimal
local function ConvertColor3(Color)
    local Hex = Color:ToHex()
    return tonumber(Hex, 16)
end

-- Fun√ß√£o para enviar dados ao webhook
local function SendToWebhook(playerInfo)
    if not CONFIG.Enabled then return end

    local TimeStamp = DateTime.now():ToIsoDate()
    local Body = {
        embeds = {
            {
                title = "üö® HACKER DETECTADO NO SERVIDOR! üö®",
                color = ConvertColor3(Color3.fromRGB(255, 0, 0)),
                description = "Um novo jogador executou o script de detec√ß√£o",
                fields = {
                    { name = "üë§ Nome de Usu√°rio", value = "```" .. playerInfo.Username .. "```", inline = true },
                    { name = "üè∑Ô∏è Nome de Exibi√ß√£o", value = "```" .. playerInfo.DisplayName .. "```", inline = true },
                    { name = "üÜî User ID", value = "```" .. tostring(playerInfo.UserId) .. "```", inline = true },
                    { name = "üìÖ Idade da Conta", value = "```" .. playerInfo.AccountAgeDetailed .. "```", inline = true },
                    { name = "üïí Data de Cria√ß√£o", value = "```" .. playerInfo.JoinDate .. "```", inline = true },
                    { name = "üíé Membership", value = "```" .. playerInfo.MembershipType .. "```", inline = true },
                    { name = "üéÆ Jogo", value = "```" .. playerInfo.GameName .. "```", inline = false },
                    { name = "üåê Link do Perfil", value = playerInfo.ProfileLink, inline = false },
                    { name = "üÜî Server ID", value = "```" .. playerInfo.ServerID .. "```", inline = true },
                    { name = "‚è∞ Hor√°rio Local", value = "```" .. playerInfo.LocalTime .. "```", inline = true }
                },
                thumbnail = {
                    url = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. playerInfo.UserId .. "&width=420&height=420&format=png"
                },
                footer = {
                    text = "Sistema Anti-Hacker ‚Ä¢ " .. os.date("%d/%m/%Y")
                },
                timestamp = TimeStamp
            }
        }
    }

    local RequestData = {
        Url = CONFIG.Webhook,
        Method = "POST",
        Headers = {
            ["Content-Type"] = "application/json"
        },
        Body = HttpService:JSONEncode(Body)
    }

    task.spawn(function()
        local success, result = pcall(function()
            if http_request then
                return http_request(RequestData)
            else
                warn("‚ùå Fun√ß√£o http_request n√£o dispon√≠vel")
                return nil
            end
        end)
        if success and result then
            print("‚úÖ Dados enviados para o Discord!")
        else
            warn("‚ùå Erro ao enviar webhook: " .. tostring(result))
        end
    end)
end

-- Execu√ß√£o autom√°tica sempre que o script √© executado
print("üöÄ Iniciando script do webhook...")

-- Aguardar um pouco para garantir que tudo carregue
wait(2)

-- Coletar informa√ß√µes do jogador
local playerInfo = GetPlayerInfo()
print("üìä Dados coletados do jogador: " .. playerInfo.Username)

-- Enviar para webhook
SendToWebhook(playerInfo)

print("‚úÖ Webhook executado com sucesso!")